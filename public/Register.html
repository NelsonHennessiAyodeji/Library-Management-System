public/<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="./css/login.css" />
    <title>CSS Login Screen Tutorial</title>
  </head>
  <body>
    <body>
      <nav class="navbar">
        <div class="nav-right">
          <li><a href="/index.html">Home</a></li>
          <li><a href="/products.html">Products</a></li>
          <li><a href="/About.html">About</a></li>
          <li><a href="/login.html">Login</a></li>
          <li><a href="/Register.html">Create Account</a></li>
        </div>
      </nav>
      <div class="login-page">
        <div class="form">
          <div class="login">
            <div class="login-header">
              <h3>REGISTER</h3>
              <p>Please enter your credentials to login.</p>
            </div>
          </div>
          <form class="login-form">
            <input type="text" id="name" placeholder="username" />
            <input type="email" id="email" placeholder="email" />
            <input type="password" id="password" placeholder="password" />
            Female
            <input type="radio" name="female" value="female" /> Male<input
              type="radio"
              name="male"
              value="male"
            />
            <button id="register-btn">Register</button>
            <p class="message">
              Not registered? <a href="/login.html">Login</a>
            </p>
          </form>
        </div>
      </div>
    </body>
  </body>

  <script defer>
    const nameInput = document.getElementById("name");
    const emailInput = document.getElementById("email");
    const passwordInput = document.getElementById("password");
    const registerBtn = document.getElementById("register-btn");
    const baseURL = "https://library-management-system-d2rd.onrender.com/auth";

    registerBtn.addEventListener("click", submitForm);

    async function submitForm(e) {
      e.preventDefault();
      if (nameInput && emailInput && passwordInput) {
        const res = await fetch(`${baseURL}/register`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            name: nameInput.value,
            email: emailInput.value,
            password: passwordInput.value,
          }),
        });

        if (res.ok) {
          const { user } = await res.json();
          console.log(user);
          window.location =
            "https://library-management-system-d2rd.onrender.com/login.html";
          alert("Registeration was successful");
        } else {
          alert("Something went wrong");
        }
      }
    }
  </script>
</html>
